# Payment queries and mutations

query GetPayment($id: ID!) {
  getPayment(id: $id) {
    id
    member {
      miembro_id
      numero_socio
      nombre
      apellidos
    }
    family {
      id
      numero_socio
      esposo_nombre
      esposa_nombre
    }
    amount
    payment_date
    status
    payment_method
    notes
  }
}

query GetMemberPayments($memberId: ID!) {
  getMemberPayments(memberId: $memberId) {
    id
    member {
      miembro_id
      numero_socio
      nombre
      apellidos
    }
    amount
    payment_date
    status
    payment_method
    notes
  }
}

query GetFamilyPayments($familyId: ID!) {
  getFamilyPayments(familyId: $familyId) {
    id
    family {
      id
      numero_socio
      esposo_nombre
      esposa_nombre
    }
    amount
    payment_date
    status
    payment_method
    notes
  }
}

query GetPaymentStatus($id: ID!) {
  getPaymentStatus(id: $id)
}

# List all payments with filters and pagination
query ListPayments($filter: PaymentFilter) {
  listPayments(filter: $filter) {
    nodes {
      id
      member {
        miembro_id
        numero_socio
        nombre
        apellidos
      }
      family {
        id
        numero_socio
        esposo_nombre
        esposa_nombre
      }
      amount
      payment_date
      status
      payment_method
      notes
      membership_fee {
        id
        year
      }
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      totalCount
    }
  }
}

mutation RegisterPayment($input: PaymentInput!) {
  registerPayment(input: $input) {
    id
    member {
      miembro_id
      numero_socio
      nombre
      apellidos
    }
    family {
      id
      numero_socio
      esposo_nombre
      esposa_nombre
    }
    amount
    payment_date
    status
    payment_method
    notes
  }
}

mutation UpdatePayment($id: ID!, $input: PaymentInput!) {
  updatePayment(id: $id, input: $input) {
    id
    member {
      miembro_id
      numero_socio
      nombre
      apellidos
    }
    family {
      id
      numero_socio
      esposo_nombre
      esposa_nombre
    }
    amount
    payment_date
    status
    payment_method
    notes
  }
}

mutation CancelPayment($id: ID!, $reason: String!) {
  cancelPayment(id: $id, reason: $reason) {
    success
    message
    error
  }
}

mutation RegisterFee($year: Int!, $base_amount: Float!) {
  registerFee(year: $year, base_amount: $base_amount) {
    success
    message
    error
  }
}
