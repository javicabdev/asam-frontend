# Family queries and mutations

query GetFamily($id: ID!) {
  getFamily(id: $id) {
    id
    numero_socio
    miembro_origen {
      miembro_id
      numero_socio
      nombre
      apellidos
    }
    esposo_nombre
    esposo_apellidos
    esposa_nombre
    esposa_apellidos
    telefonos {
      numero_telefono
    }
    familiares {
      id
      nombre
      apellidos
      fecha_nacimiento
      dni_nie
      correo_electronico
      telefonos {
        numero_telefono
      }
    }
  }
}

query GetFamilyByOriginMember($memberId: ID!) {
  getFamilyByOriginMember(memberId: $memberId) {
    id
    numero_socio
    miembro_origen {
      miembro_id
      numero_socio
      nombre
      apellidos
    }
    esposo_nombre
    esposo_apellidos
    esposa_nombre
    esposa_apellidos
    esposa_fecha_nacimiento
    esposa_document_type
    esposa_documento_identidad
    esposa_correo_electronico
    telefonos {
      numero_telefono
    }
    familiares {
      id
      nombre
      apellidos
      fecha_nacimiento
      dni_nie
      correo_electronico
      telefonos {
        numero_telefono
      }
    }
  }
}

query ListFamilies($filter: FamilyFilter) {
  listFamilies(filter: $filter) {
    nodes {
      id
      numero_socio
      miembro_origen {
        miembro_id
        numero_socio
        nombre
        apellidos
      }
      esposo_nombre
      esposo_apellidos
      esposa_nombre
      esposa_apellidos
      telefonos {
        numero_telefono
      }
      familiares {
        id
        nombre
        apellidos
        fecha_nacimiento
        dni_nie
        correo_electronico
        telefonos {
          numero_telefono
        }
      }
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      totalCount
    }
  }
}

query GetFamilyMembers($familyId: ID!) {
  getFamilyMembers(familyId: $familyId) {
    id
    nombre
    apellidos
    fecha_nacimiento
    dni_nie
    correo_electronico
    telefonos {
      numero_telefono
    }
  }
}

mutation CreateFamily($input: CreateFamilyInput!) {
  createFamily(input: $input) {
    id
    numero_socio
    miembro_origen {
      miembro_id
      numero_socio
      nombre
      apellidos
    }
    esposo_nombre
    esposo_apellidos
    esposa_nombre
    esposa_apellidos
    telefonos {
      numero_telefono
    }
    familiares {
      id
      nombre
      apellidos
      fecha_nacimiento
      dni_nie
      correo_electronico
      telefonos {
        numero_telefono
      }
    }
  }
}

mutation UpdateFamily($input: UpdateFamilyInput!) {
  updateFamily(input: $input) {
    id
    numero_socio
    miembro_origen {
      miembro_id
      numero_socio
      nombre
      apellidos
    }
    esposo_nombre
    esposo_apellidos
    esposa_nombre
    esposa_apellidos
    telefonos {
      numero_telefono
    }
    familiares {
      id
      nombre
      apellidos
      fecha_nacimiento
      dni_nie
      correo_electronico
      telefonos {
        numero_telefono
      }
    }
  }
}

mutation AddFamilyMember($family_id: ID!, $familiar: FamiliarInput!) {
  addFamilyMember(family_id: $family_id, familiar: $familiar) {
    id
    numero_socio
    miembro_origen {
      miembro_id
      numero_socio
      nombre
      apellidos
    }
    esposo_nombre
    esposo_apellidos
    esposa_nombre
    esposa_apellidos
    telefonos {
      numero_telefono
    }
    familiares {
      id
      nombre
      apellidos
      fecha_nacimiento
      dni_nie
      correo_electronico
      telefonos {
        numero_telefono
      }
    }
  }
}

mutation RemoveFamilyMember($familiar_id: ID!) {
  removeFamilyMember(familiar_id: $familiar_id) {
    success
    message
    error
  }
}
